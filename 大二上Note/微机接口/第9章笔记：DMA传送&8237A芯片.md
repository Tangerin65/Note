# 1.8237A的工作方式
定位：I/O接口-**8237A**-系统总线-存储器，在DMA传输下独立于CPU运行，否则接受处理器控制进行I/O接口数据传输
### 1.1.与DMA的关联
 - 什么是DMA：计算机系统中允许某些硬件子系统（如磁盘控制器、网络适配器或显卡）绕过CPU直接访问RAM的一种功能。
 - 看书：[[微机接口Chapter9.pdf#page=1&selection=37,1,62,16&color=yellow|微机接口Chapter9, p.1]]

### 1.2.内部结构与引脚
 - 寄存器：通道寄存器/控制和状态寄存器[[微机接口Chapter9.pdf#page=1&selection=77,7,116,2&color=yellow|微机接口Chapter9, p.1]]
 - 引脚：![[微机接口Chapter9.pdf#page=1&rect=329,264,585,450&color=yellow|微机接口Chapter9, p.1]]
	 - 请求和响应信号：[[微机接口Chapter9.pdf#page=1&selection=133,0,133,9&color=yellow|微机接口Chapter9, p.1]]，每一个都要看
	 - DMA传送控制信号：[[微机接口Chapter9.pdf#page=2&selection=6,0,7,6&color=yellow|微机接口Chapter9, p.2]]，每一个都要看
	 - 处理器接口信号：[[微机接口Chapter9.pdf#page=2&selection=192,0,192,8&color=yellow|微机接口Chapter9, p.2]]
	 - Sum：![[微机接口Chapter9.pdf#page=2&rect=2,35,592,156&color=yellow|微机接口Chapter9, p.2]]

### 1.3.工作时序/状态
 - 空闲周期：受CPU控制，作为接口电路传输数据，可编程，[[微机接口Chapter9.pdf#page=3&selection=17,0,17,6&color=yellow|微机接口Chapter9, p.3]]
 - 有效周期：独立于CPU运行，控制DMA传输，[[微机接口Chapter9.pdf#page=3&selection=69,0,71,4&color=yellow|微机接口Chapter9, p.3]]
	 - 时序：![[微机接口Chapter9.pdf#page=3&rect=21,202,596,478&color=yellow|微机接口Chapter9, p.3]]
		第二个$S_i$时：DREQ和HRQ为高，进入DMA状态，即$S_0$，但仍在等待总线回应
		第二个$S_0$时：HLDA=1，总线发出响应，DMA传送正式开始
		$S_1$上升沿，AEN=1且ADSTB=1后：开始传输高低位地址，DACK=1通知外设开始数据读写
		$S_2$MEMR和IOW控制读写，输出DMA响应和控制信号，准备进行数据传送
		$S_3$检测数据传送能否完成，决定是否插入等待状态$S_w$
		$S_4$完成数据传送

### 1.4.工作方式
[[微机接口Chapter9.pdf#page=4&selection=165,0,174,19&color=yellow|微机接口Chapter9, p.4]]
 - DMA传送方式：数据以什么节奏和策略传输
	 - 单字节传送：[[微机接口Chapter9.pdf#page=4&selection=187,3,188,6&color=yellow|微机接口Chapter9, p.4]]
	 - 数据块传送： [[微机接口Chapter9.pdf#page=4&selection=276,0,276,7&color=yellow|微机接口Chapter9, p.4]]，这期间CPU长时间无法控制总线
	 - 请求传送方式：可由DREQ信靠控制暂停[[微机接口Chapter9.pdf#page=5&selection=23,0,25,6&color=yellow|微机接口Chapter9, p.5]]
	 - 级联方式：[[微机接口Chapter9.pdf#page=5&selection=92,0,94,4&color=yellow|微机接口Chapter9, p.5]]
- DMA传送类型：[[微机接口Chapter9.pdf#page=5&selection=128,0,130,4&color=yellow|微机接口Chapter9, p.5]]，数据要往哪里去
	- DMA读/DMA写
	- MDA检验(空操作)：验证时序和地址，但断开数据传输
- 存储器间传送：[[微机接口Chapter9.pdf#page=5&selection=204,0,206,11&color=yellow|微机接口Chapter9, p.5]]
- 优先权方式：[[微机接口Chapter9.pdf#page=5&selection=311,0,313,8&color=yellow|微机接口Chapter9, p.5]]
- 自动初始化：[[微机接口Chapter9.pdf#page=6&selection=29,0,30,7&color=yellow|微机接口Chapter9, p.6]]，$\overline{EOP}$信号

---
# 2.8237A寄存器组的作用
用$A_0$到$A_3$进行编码区分
![[微机接口Chapter9.pdf#page=6&rect=11,213,585,504&color=yellow|微机接口Chapter9, p.6]]
 - 现行地址寄存器：存储并提供下一个要访问的内存单元的地址，实时更新[[微机接口Chapter9.pdf#page=6&selection=250,1,250,8&color=note|p.6]]
 - 现行字节数寄存器：DMA传送的剩余字节数，实时更新[[微机接口Chapter9.pdf#page=6&selection=264,1,264,9&color=note|p.6]]
 - 基地址寄存器：存储并保留 CPU 为特定 DMA 通道设定的原始内存起始地址[[微机接口Chapter9.pdf#page=6&selection=281,1,281,7&color=note|p.6]]
 - 基字节数寄存器：[[微机接口Chapter9.pdf#page=7&selection=8,1,8,8&color=note|p.7]]
 - 模式寄存器：[[微机接口Chapter9.pdf#page=7&selection=91,0,91,5&color=note|p.7]]
 - 

